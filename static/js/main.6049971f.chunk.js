(this.webpackJsonpplaylist=this.webpackJsonpplaylist||[]).push([[0],{26:function(t,e,s){},27:function(t,e,s){},28:function(t,e,s){},35:function(t,e,s){},36:function(t,e,s){},37:function(t,e,s){},38:function(t,e,s){},39:function(t,e,s){},40:function(t,e,s){},43:function(t,e,s){"use strict";s.r(e);var a=s(1),i=s.n(a),l=s(13),n=s.n(l),r=(s(26),s(21)),c=s(7),o=s(8),h=s(3),d=s(10),u=s(9),y=(s(27),s(28),s(5)),p=s(4),k=s(0);function m(t){var e=t.searchPhrase,s=t.handleSearchChange,a=t.handleClick,i=t.playlists,l=t.hasCheckedForPlaylists,n=Object(k.jsx)(y.a,{icon:p.h,size:"2x"}),r=Object(k.jsx)(y.a,{icon:p.c,size:"2x"});return Object(k.jsxs)("div",{className:"SearchBar",children:[Object(k.jsx)("input",{placeholder:"Enter A Song, Album, or Artist",value:e,onChange:s}),Object(k.jsx)("button",{className:e||0===i.length&&!l?"SearchButton":"SearchButton-inactive",onClick:e||0===i.length&&!l?a:null,children:e||i.length>0||l?n:r})]})}s(35),s(36),s(37);function P(t){var e=t.track,s=t.isInPlaylist,a=t.handleClick,i=t.play,l=t.isPlayed,n=t.isTrackPlayed,r=t.titleLink,c=t.artistLink,o=t.albumLink,h=Object(k.jsx)(y.a,{icon:p.e,size:"xs"}),d=Object(k.jsx)(y.a,{icon:p.d,size:"xs"});return Object(k.jsxs)("div",{className:"Track",children:[Object(k.jsxs)("div",{className:"Track-information",children:[Object(k.jsx)("h3",{className:"Track-link",onClick:r,children:e.title}),Object(k.jsxs)("p",{children:[Object(k.jsx)("span",{className:"Track-link",onClick:c,children:e.artist})," | ",Object(k.jsx)("span",{className:"Track-link",onClick:o,children:e.album})]})]}),Object(k.jsx)("audio",{loop:!0,id:e.id,src:e.preview?e.preview:"https://bigsoundbank.com/UPLOAD/mp3/0".concat(Math.floor(900*Math.random()+100),".mp3"),children:"Your browser does not support the audio element"}),Object(k.jsx)("button",{className:l||!n?e.preview?"Track-action":"Track-action red":"Track-action-disabled",onClick:l||!n?i:null,children:l?d:h}),Object(k.jsx)("button",{className:e.doubledInPlaylist&&!s?"Track-action-disabled":"Track-action",onClick:a,children:s?"-":"+"})]})}var f=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={isPlayed:!1},a.handleClick=a.handleClick.bind(Object(h.a)(a)),a.play=a.play.bind(Object(h.a)(a)),a.titleLink=a.titleLink.bind(Object(h.a)(a)),a.albumLink=a.albumLink.bind(Object(h.a)(a)),a.artistLink=a.artistLink.bind(Object(h.a)(a)),a}return Object(o.a)(s,[{key:"handleClick",value:function(){this.props.isInPlaylist?this.props.removeTrack(this.props.track):this.props.addTrack(this.props.track)}},{key:"play",value:function(){var t=this;this.state.isPlayed?this.setState({isPlayed:!1},(function(){t.props.pauseTrack(t.props.track)})):this.setState({isPlayed:!0},(function(){t.props.playTrack(t.props.track)}))}},{key:"titleLink",value:function(){window.open(this.props.track.url)}},{key:"artistLink",value:function(){window.open(this.props.track.artistUrl)}},{key:"albumLink",value:function(){window.open(this.props.track.albumUrl)}},{key:"render",value:function(){return Object(k.jsx)(P,{track:this.props.track,isInPlaylist:this.props.isInPlaylist,handleClick:this.handleClick,play:this.play,isPlayed:this.state.isPlayed,isTrackPlayed:this.props.isTrackPlayed,titleLink:this.titleLink,artistLink:this.artistLink,albumLink:this.albumLink})}},{key:"componentDidUpdate",value:function(t,e){var s=this;t.isTrackPlayed!==this.props.isTrackPlayed&&e.isPlayed&&t.isTrackPlayed&&this.setState({isPlayed:!1},(function(){s.props.pauseTrack(s.props.track)}))}},{key:"componentWillUnmount",value:function(){this.props.isInPlaylist&&this.state.isPlayed&&this.props.pauseTrack(this.props.track)}}]),s}(i.a.Component);function v(t){var e=t.tracks,s=t.isInPlaylist,a=t.addTrack,i=t.removeTrack,l=t.playTrack,n=t.pauseTrack,r=t.isTrackPlayed;return Object(k.jsx)("div",{className:"TrackList",children:e.map((function(t){return Object(k.jsx)(f,{track:t,isInPlaylist:s,addTrack:a,removeTrack:i,playTrack:l,pauseTrack:n,isTrackPlayed:r},t.id)}))})}s(38);var T=s(2),b=s.n(T);s(39);function j(t){var e=t.playlist,s=t.handleRemove,a=t.editPlaylist,i=t.areYouSure,l=t.deleteImminent,n=t.linkToPlaylist,r=t.isEdited,c=t.isCurrentPlaylistOnList,o=t.isSavedPlaylistAltered,h=Object(k.jsx)(y.a,{icon:p.j,size:"xs"}),d=Object(k.jsx)(y.a,{icon:p.a,size:"xs"}),u=Object(k.jsx)(y.a,{icon:p.f,size:"xs"}),m=Object(k.jsx)(y.a,{icon:p.b,size:"xs"});return Object(k.jsxs)("div",{className:"PlaylistListItem",children:[Object(k.jsxs)("div",{className:"Playlist-information",children:[Object(k.jsx)("h3",{className:"PlaylistListItem-link",onClick:n,children:e.name}),Object(k.jsxs)("p",{children:["Number of tracks: ",e.tracks]})]}),Object(k.jsx)("div",{className:"img-container",children:Object(k.jsx)("img",{src:e.images.length>0?e.images[0].url:"",alt:"",onClick:n})}),Object(k.jsx)("button",{className:r?"Playlist-action-disabled":"Playlist-action",onClick:r?null:s,children:i||l?l?m:u:h}),Object(k.jsx)("button",{className:i||l||r||c&&o?"Playlist-action-disabled":"Playlist-action",onClick:r||c&&o?null:a,children:d})]})}var S=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={areYouSure:!1,deleteImminent:!1},a.handleRemove=a.handleRemove.bind(Object(h.a)(a)),a.editPlaylist=a.editPlaylist.bind(Object(h.a)(a)),a.linkToPlaylist=a.linkToPlaylist.bind(Object(h.a)(a)),a}return Object(o.a)(s,[{key:"linkToPlaylist",value:function(){window.open(this.props.playlist.url)}},{key:"editPlaylist",value:function(){this.props.getPlaylistDetails(this.props.playlist)}},{key:"handleRemove",value:function(){var t=this;this.state.areYouSure||this.state.deleteImminent?this.state.areYouSure&&!this.state.deleteImminent?this.setState({deleteImminent:!0},(function(){t.t=setTimeout((function(){t.props.removePlaylist(t.props.playlist)}),3e3)})):this.state.deleteImminent&&this.setState({deleteImminent:!1,areYouSure:!1}):this.setState({areYouSure:!0},(function(){t.t=setTimeout((function(){t.setState({areYouSure:!1})}),5e3)}))}},{key:"render",value:function(){return Object(k.jsx)(j,{playlist:this.props.playlist,areYouSure:this.state.areYouSure,deleteImminent:this.state.deleteImminent,handleRemove:this.handleRemove,editPlaylist:this.editPlaylist,linkToPlaylist:this.linkToPlaylist,isCurrentPlaylistOnList:this.props.isCurrentPlaylistOnList,isSavedPlaylistAltered:this.props.isSavedPlaylistAltered,isEdited:this.props.playlist.viewedInDetail})}},{key:"componentDidUpdate",value:function(t,e){(e.areYouSure&&!e.deleteImminent||e.deleteImminent)&&clearTimeout(this.t)}}]),s}(i.a.Component);function g(t){var e=t.playlists,s=t.removePlaylist,a=t.getPlaylistDetails,i=t.isSavedPlaylistAltered,l=t.isCurrentPlaylistOnList;return Object(k.jsx)("div",{className:"PlaylistList",children:e.map((function(t){return Object(k.jsx)(S,{playlist:t,removePlaylist:s,getPlaylistDetails:a,isSavedPlaylistAltered:i,isCurrentPlaylistOnList:l},t.id)}))})}function O(t){var e=t.tracks,s=t.addTrack,a=t.playTrack,i=t.pauseTrack,l=t.isTrackPlayed,n=t.playlists,r=t.removePlaylist,c=t.hasCheckedForPlaylists,o=t.getPlaylistDetails,h=t.isCurrentPlaylistOnList,d=t.isSavedPlaylistAltered;return Object(k.jsxs)("div",{className:"SearchResults",style:0!==e.length||0!==n.length||c?{}:{display:"none"},children:[Object(k.jsx)("h2",{children:0===e.length?"No search results":"Search Results:"}),Object(k.jsx)("div",{className:"SearchResults-tracklist",style:0===e.length?{display:"none"}:{},children:Object(k.jsx)(v,{tracks:e,isInPlaylist:!1,addTrack:s,playTrack:a,pauseTrack:i,isTrackPlayed:l})}),Object(k.jsx)("h2",{style:{paddingTop:".88rem"},children:0===n.length?"No playlists to display":"My Playlists:"}),Object(k.jsx)("div",{className:"SearchResults-playlists",style:0===e.length?{height:"840px"}:{},children:Object(k.jsx)(g,{playlists:n,removePlaylist:r,getPlaylistDetails:o,isSavedPlaylistAltered:d,isCurrentPlaylistOnList:h})})]})}j.propTypes={playlist:b.a.object.isRequired,removePlaylist:b.a.func,getPlaylistDetails:b.a.func,isCurrentPlaylistOnList:b.a.bool.isRequired,isSavedPlaylistAltered:b.a.bool.isRequired};s(40);function x(t){var e=t.tracks,s=t.playlistName,a=t.handleListNameChange,i=t.removeTrack,l=t.savePlaylist,n=t.playTrack,r=t.pauseTrack,c=t.isTrackPlayed,o=t.clearPlaylist,h=t.isCurrentPlaylistOnList,d=t.isSavedPlaylistAltered,u=t.handleDelete,m=t.areYouSure,P=t.deleteImminent,f=Object(k.jsx)(y.a,{icon:p.g}),T=Object(k.jsx)(y.a,{icon:p.i}),b=Object(k.jsx)(y.a,{icon:p.j}),j=Object(k.jsx)(y.a,{icon:p.f}),S=Object(k.jsx)(y.a,{icon:p.b});return Object(k.jsxs)("div",{className:"Playlist",style:0===e.length?{display:"none"}:{},children:[Object(k.jsxs)("div",{className:"Playlist-title",children:[Object(k.jsx)("input",{value:s,placeholder:"New Playlist",onChange:a}),Object(k.jsx)("button",{className:0!==e.length||s?"Playlist-title-button":"Playlist-title-button-disabled",onClick:o,children:T}),Object(k.jsx)("button",{className:h?"Playlist-title-button":"Playlist-title-button-disabled",onClick:h?u:null,children:m||P?P?S:j:b}),Object(k.jsx)("button",{className:0===e.length||!s||h&&!d?"Playlist-title-button-disabled":"Playlist-title-button",onClick:0===e.length||!s||h&&!d?null:l,children:f})]}),Object(k.jsx)("div",{className:"Playlist-tracklist",children:Object(k.jsx)(v,{tracks:e,isInPlaylist:!0,removeTrack:i,playTrack:n,pauseTrack:r,isTrackPlayed:c})})]})}var I=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={areYouSure:!1,deleteImminent:!1},a.handleDelete=a.handleDelete.bind(Object(h.a)(a)),a}return Object(o.a)(s,[{key:"handleDelete",value:function(){var t=this;this.state.areYouSure||this.state.deleteImminent?this.state.areYouSure&&!this.state.deleteImminent?this.setState({deleteImminent:!0},(function(){t.t=setTimeout((function(){t.props.removePlaylist("current")}),3e3)})):this.state.deleteImminent&&this.setState({deleteImminent:!1,areYouSure:!1}):this.setState({areYouSure:!0},(function(){t.t=setTimeout((function(){t.setState({areYouSure:!1})}),5e3)}))}},{key:"render",value:function(){return Object(k.jsx)(x,{tracks:this.props.tracks,playlistName:this.props.playlistName,handleListNameChange:this.props.handleListNameChange,removeTrack:this.props.removeTrack,savePlaylist:this.props.savePlaylist,playTrack:this.props.playTrack,pauseTrack:this.props.pauseTrack,isTrackPlayed:this.props.isTrackPlayed,clearPlaylist:this.props.clearPlaylist,isCurrentPlaylistOnList:this.props.isCurrentPlaylistOnList,isSavedPlaylistAltered:this.props.isSavedPlaylistAltered,handleDelete:this.handleDelete,areYouSure:this.state.areYouSure,deleteImminent:this.state.deleteImminent})}},{key:"componentDidUpdate",value:function(t,e){(e.areYouSure&&!e.deleteImminent||e.deleteImminent)&&clearTimeout(this.t)}}]),s}(i.a.Component);function N(t){var e=t.playlistTracks,s=t.searchTracks,a=t.searchPhrase,i=t.handleSearchChange,l=t.playlistName,n=t.handleListNameChange,r=t.addTrack,c=t.removeTrack,o=t.search,h=t.savePlaylist,d=t.playTrack,u=t.pauseTrack,y=t.isTrackPlayed,p=t.playlists,P=t.clearPlaylist,f=t.removePlaylist,v=t.isCurrentPlaylistOnList,T=t.hasCheckedForPlaylists,b=t.getPlaylistDetails,j=t.isSavedPlaylistAltered;return Object(k.jsxs)("div",{children:[Object(k.jsxs)("h1",{children:["Play",Object(k.jsx)("span",{className:"highlight",children:"List"})]}),Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(m,{searchPhrase:a,handleSearchChange:i,handleClick:o,playlists:p,hasCheckedForPlaylists:T}),Object(k.jsxs)("div",{className:"App-playlist",children:[Object(k.jsx)(O,{tracks:s,addTrack:r,playTrack:d,pauseTrack:u,isTrackPlayed:y,playlists:p,removePlaylist:f,hasCheckedForPlaylists:T,getPlaylistDetails:b,isCurrentPlaylistOnList:v,isSavedPlaylistAltered:j}),Object(k.jsx)(I,{tracks:e,playlistName:l,handleListNameChange:n,removeTrack:c,savePlaylist:h,playTrack:d,pauseTrack:u,isTrackPlayed:y,clearPlaylist:P,isCurrentPlaylistOnList:v,isSavedPlaylistAltered:j,removePlaylist:f})]})]})]})}var C={clientId:"0a17b8b42a554c40ab787250e8aaa438",accessToken:"",tokenExpiry:null,redirectURI:"https://johnpaul85.github.io/playlist",generateURLState:function(){sessionStorage.urlState=Math.floor(1e5*Math.random()).toString()},getAccessToken:function(){var t=this;if(window.location.href.match(/state=(\d+)/)[1]===sessionStorage.urlState){this.accessToken=window.location.href.match(/access_token=([^&]+)/)[1],this.tokenExpiry=window.location.href.match(/expires_in=([^&]+)/)[1];var e=Date.now()+1e3*this.tokenExpiry;window.history.pushState("AccessToken",null,"/"),setTimeout((function(){return t.accessToken=""}),e-Date.now())}},getUserId:function(){return fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(t){if(t.ok)return t.json()})).then((function(t){return t.id}))},getUserPlaylists:function(){return fetch("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(t){if(t.ok)return t.json()}))},getPlaylistDetails:function(t){var e="https://api.spotify.com/v1/playlists/".concat(t);return fetch(e,{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(t){if(t.ok)return t.json()}))},createPlaylist:function(t,e){var s="https://api.spotify.com/v1/users/".concat(t,"/playlists"),a=JSON.stringify({name:e});return fetch(s,{method:"POST",headers:{Authorization:"Bearer ".concat(this.accessToken),"Content-Type":"application/json"},body:a}).then((function(t){if(t.ok)return t.json()}))},addPlaylist:function(t,e){var s=this;if(this.accessToken)return this.getUserId().then((function(e){return s.createPlaylist(e,t)})).then((function(t){var a=t.id,i="https://api.spotify.com/v1/playlists/".concat(a,"/tracks"),l=JSON.stringify({uris:e});return fetch(i,{method:"POST",headers:{Authorization:"Bearer ".concat(s.accessToken),"Content-Type":"application/json"},body:l})})).then((function(t){if(t.ok)return t.json()}));this.generateURLState(),this.spotifyLogin(sessionStorage.urlState)},removePlaylist:function(t){var e="https://api.spotify.com/v1/playlists/".concat(t,"/followers");return fetch(e,{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(t){if(t.ok)return t}))},updatePlaylist:function(t,e,s){var a=this;if(this.accessToken){var i="https://api.spotify.com/v1/playlists/".concat(s),l="".concat(i,"/tracks");return fetch(i,{method:"PUT",headers:{Authorization:"Bearer ".concat(this.accessToken),"Content-Type":"application/json"},body:JSON.stringify({name:t})}).then((function(t){if(t.ok)return fetch(l,{method:"PUT",headers:{Authorization:"Bearer ".concat(a.accessToken),"Content-Type":"application/json"},body:JSON.stringify({uris:e})})})).then((function(t){if(t.ok)return t}))}this.generateURLState(),this.spotifyLogin(sessionStorage.urlState)},spotifyLogin:function(t){var e="https://accounts.spotify.com/authorize?client_id=".concat(this.clientId,"&response_type=token&redirect_uri=").concat(encodeURIComponent(this.redirectURI),"&state=").concat(t,"&scope=playlist-modify-public");return!this.accessToken&&(window.location.href=e,!0)},search:function(t){if(t){var e="https://api.spotify.com/v1/search?q=".concat(encodeURIComponent(t),"&type=track");return fetch(e,{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(t){if(t.ok)return t.json()})).then((function(t){return t.tracks.items}))}}},L=function(t){Object(d.a)(s,t);var e=Object(u.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={playlistTracks:[],searchPhrase:"",searchTracks:[],playlistName:"",isTrackPlayed:!1,playlists:[],isCurrentPlaylistOnList:!1,hasCheckedForPlaylists:!1,isSavedPlaylistAltered:!1},a.handleSearchChange=a.handleSearchChange.bind(Object(h.a)(a)),a.handleListNameChange=a.handleListNameChange.bind(Object(h.a)(a)),a.addTrack=a.addTrack.bind(Object(h.a)(a)),a.removeTrack=a.removeTrack.bind(Object(h.a)(a)),a.search=a.search.bind(Object(h.a)(a)),a.handleSearchResponse=a.handleSearchResponse.bind(Object(h.a)(a)),a.savePlaylist=a.savePlaylist.bind(Object(h.a)(a)),a.playTrack=a.playTrack.bind(Object(h.a)(a)),a.pauseTrack=a.pauseTrack.bind(Object(h.a)(a)),a.clearPlaylist=a.clearPlaylist.bind(Object(h.a)(a)),a.getPlaylists=a.getPlaylists.bind(Object(h.a)(a)),a.removePlaylist=a.removePlaylist.bind(Object(h.a)(a)),a.getPlaylistDetails=a.getPlaylistDetails.bind(Object(h.a)(a)),a.handlePlaylistDetails=a.handlePlaylistDetails.bind(Object(h.a)(a)),a}return Object(o.a)(s,[{key:"handleSearchChange",value:function(t){var e=t.target;this.setState({searchPhrase:e.value})}},{key:"search",value:function(){var t=this;C.generateURLState(),sessionStorage.searchPhrase=this.state.searchPhrase,sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks);var e=C.spotifyLogin(sessionStorage.urlState);!e&&this.state.searchPhrase?(C.search(this.state.searchPhrase).then((function(e){return t.handleSearchResponse(e)})),this.getPlaylists()):e||this.state.searchPhrase||this.getPlaylists()}},{key:"handleSearchResponse",value:function(t){var e=this,s=t.map((function(t){return{title:t.name,artist:t.artists[0].name,album:t.album.name,id:t.id,URI:t.uri,preview:t.preview_url,doubledInPlaylist:!1,url:t.external_urls.spotify,artistUrl:t.artists[0].external_urls.spotify,albumUrl:t.album.external_urls.spotify}})).filter((function(t){return!e.state.playlistTracks.map((function(t){return t.id})).includes(t.id)}));this.setState({searchTracks:s,searchPhrase:"",isTrackPlayed:!1})}},{key:"handleListNameChange",value:function(t){var e=t.target;this.setState({playlistName:e.value})}},{key:"handlePlaylistDetails",value:function(t){var e=t.name,s=t.tracks.items.map((function(t){return{title:t.track.name,artist:t.track.artists[0].name,album:t.track.album.name,id:t.track.id,URI:t.track.uri,doubledInPlaylist:!0,preview:t.track.preview_url,url:t.track.external_urls.spotify,artistUrl:t.track.artists[0].external_urls.spotify,albumUrl:t.track.album.external_urls.spotify}})),a=this.state.searchTracks;if(a.length>0){var i=a.map((function(t){return t.id}));a.forEach((function(t){t.doubledInPlaylist=!1})),s.forEach((function(t){console.log(t);var e=i.indexOf(t.id);e>-1&&(a[e].doubledInPlaylist=!0)}))}this.setState({playlistName:e,playlistTracks:s,searchTracks:a,isCurrentPlaylistOnList:!0})}},{key:"getPlaylists",value:function(){var t=this;this.state.isCurrentPlaylistOnList||C.getUserPlaylists().then((function(e){var s=e.items.map((function(t){return{id:t.id,name:t.name,tracks:t.tracks.total,images:t.images,viewedInDetail:!1,url:t.external_urls.spotify}}));t.setState({playlists:s,hasCheckedForPlaylists:!0})}))}},{key:"savePlaylist",value:function(){var t=this,e=this.state.playlistTracks.map((function(t){return t.URI}));if(e.length>0)if(sessionStorage.uriArr=JSON.stringify(e),sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks),this.state.isCurrentPlaylistOnList){var s=this.state.playlists.filter((function(t){return t.viewedInDetail}))[0].id;sessionStorage.editedPlaylistId=s,C.updatePlaylist(sessionStorage.playlistName,JSON.parse(sessionStorage.uriArr),sessionStorage.editedPlaylistId).then((function(){sessionStorage.editedPlaylistId="",t.getPlaylists(),t.clearPlaylist()}))}else C.addPlaylist(sessionStorage.playlistName,JSON.parse(sessionStorage.uriArr)).then((function(){t.getPlaylists(),t.clearPlaylist()}))}},{key:"clearPlaylist",value:function(){var t=this;this.setState({playlistTracks:[],playlistName:"",searchPhrase:sessionStorage.searchPhrase,isCurrentPlaylistOnList:!1,isSavedPlaylistAltered:!1},(function(){t.search()}))}},{key:"removePlaylist",value:function(t){var e=this;if("current"===t){C.generateURLState();var s=this.state.playlists.filter((function(t){return t.viewedInDetail}))[0].id;sessionStorage.playlistToDeleteId=s,sessionStorage.searchTracks=JSON.stringify(this.state.searchTracks),sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks),C.spotifyLogin(sessionStorage.urlState)||(C.removePlaylist(sessionStorage.playlistToDeleteId).then((function(){e.clearPlaylist()})),sessionStorage.playlistToDeleteId="",sessionStorage.searchTracks=[])}else{C.generateURLState(),sessionStorage.playlistToRemoveId=t.id,sessionStorage.searchTracks=JSON.stringify(this.state.searchTracks),sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks),C.spotifyLogin(sessionStorage.urlState)||(C.removePlaylist(sessionStorage.playlistToRemoveId).then((function(){e.getPlaylists()})),sessionStorage.playlistToRemoveId="",sessionStorage.searchTracks=[])}}},{key:"getPlaylistDetails",value:function(t){var e=this,s=this.state.playlists,a=s.map((function(t){return t.id})),i=this.state.playlists.indexOf(t),l=s.filter((function(t){return t.viewedInDetail}));if(l.length>0){var n=l[0].id;s[a.indexOf(n)].viewedInDetail=!1}s[i].viewedInDetail=!0,this.setState({playlists:s},(function(){C.generateURLState(),sessionStorage.playlistToEditId=t.id,sessionStorage.searchTracks=JSON.stringify(e.state.searchTracks),C.spotifyLogin(sessionStorage.urlState)||(C.getPlaylistDetails(sessionStorage.playlistToEditId).then((function(t){return e.handlePlaylistDetails(t)})),sessionStorage.playlistToEditId="",sessionStorage.searchTracks=[])}))}},{key:"addTrack",value:function(t){if(!this.state.playlistTracks.map((function(t){return t.id})).includes(t.id)){var e=this.state.searchTracks,s=e.map((function(t){return t.id})).indexOf(t.id);e[s].doubledInPlaylist=!0,t.doubledInPlaylist=!0,this.setState((function(s){return{searchTracks:e,playlistTracks:[].concat(Object(r.a)(s.playlistTracks),[t])}})),this.state.isCurrentPlaylistOnList&&this.setState({isSavedPlaylistAltered:!0})}}},{key:"playTrack",value:function(t){this.state.isTrackPlayed||this.setState({isTrackPlayed:!0},(function(){document.getElementById(t.id).play()}))}},{key:"pauseTrack",value:function(t){this.state.isTrackPlayed?this.setState({isTrackPlayed:!1},(function(){document.getElementById(t.id).pause()})):null!==t&&document.getElementById(t.id).pause()}},{key:"removeTrack",value:function(t){var e=this.state.searchTracks,s=e.map((function(t){return t.id})),a=this.state.playlistTracks.filter((function(e){return e.id!==t.id}));s.includes(t.id)?(e[s.indexOf(t.id)].doubledInPlaylist=!1,this.setState({searchTracks:e,playlistTracks:a})):this.setState({playlistTracks:a});this.state.isCurrentPlaylistOnList&&this.setState({isSavedPlaylistAltered:!0})}},{key:"render",value:function(){return Object(k.jsx)(N,{playlistTracks:this.state.playlistTracks,searchTracks:this.state.searchTracks,searchPhrase:this.state.searchPhrase,handleSearchChange:this.handleSearchChange,playlistName:this.state.playlistName,handleListNameChange:this.handleListNameChange,addTrack:this.addTrack,removeTrack:this.removeTrack,search:this.search,savePlaylist:this.savePlaylist,playTrack:this.playTrack,pauseTrack:this.pauseTrack,isTrackPlayed:this.state.isTrackPlayed,playlists:this.state.playlists,clearPlaylist:this.clearPlaylist,removePlaylist:this.removePlaylist,isCurrentPlaylistOnList:this.state.isCurrentPlaylistOnList,hasCheckedForPlaylists:this.state.hasCheckedForPlaylists,getPlaylistDetails:this.getPlaylistDetails,isSavedPlaylistAltered:this.state.isSavedPlaylistAltered})}},{key:"componentDidMount",value:function(){var t=this;window.location.href.match(/access_token=/)&&(C.getAccessToken(),this.setState({searchPhrase:sessionStorage.searchPhrase,searchTracks:!sessionStorage.searchPhrase&&sessionStorage.searchTracks?JSON.parse(sessionStorage.searchTracks):[],playlistName:sessionStorage.playlistName,playlistTracks:JSON.parse(sessionStorage.playlistTracks)},(function(){t.getPlaylists(),t.state.searchPhrase&&C.search(t.state.searchPhrase).then((function(e){return t.handleSearchResponse(e)})),sessionStorage.playlistToRemoveId&&(C.removePlaylist(sessionStorage.playlistToRemoveId).then((function(){t.getPlaylists()})),sessionStorage.playlistToRemoveId="",sessionStorage.searchTracks=[]),sessionStorage.playlistToDeleteId&&(C.removePlaylist(sessionStorage.playlistToDeleteId).then((function(){t.clearPlaylist()})),sessionStorage.playlistToDeleteId="",sessionStorage.searchTracks=[]),sessionStorage.playlistToEditId&&(C.getPlaylistDetails(sessionStorage.playlistToEditId).then((function(e){return t.handlePlaylistDetails(e)})),sessionStorage.playlistToEditId="",sessionStorage.searchTracks=[]),sessionStorage.editedPlaylistId&&C.updatePlaylist(sessionStorage.playlistName,JSON.parse(sessionStorage.uriArr),sessionStorage.editedPlaylistId).then((function(){sessionStorage.editedPlaylistId="",t.getPlaylists(),t.clearPlaylist()}))})))}}]),s}(i.a.Component),D=s(14),w=Object(D.b)({name:"counter",initialState:{value:0},reducers:{increment:function(t){t.value+=1},decrement:function(t){t.value-=1},incrementByAmount:function(t,e){t.value+=e.payload}}}),A=w.actions,R=(A.increment,A.decrement,A.incrementByAmount,w.reducer),U=Object(D.a)({reducer:{counter:R}}),E=s(20);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(E.a,{store:U,children:Object(k.jsx)(L,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.6049971f.chunk.js.map